{% extends 'base.html.twig' %}

{% block stylesheets %}
<style>
.row-centered { text-align:center; }
.col-centered {
	display:inline-block;
	float:none;
	text-align:left;
	margin-right: 1em;
	margin-left: 1em;
	border-radius: 10px;
}


a { color: inherit; }
a:hover{ color: inherit; text-decoration: none; }


.panel { margin: 1em; min-height: 13em; }
.panel-body { padding: 0.5em; }
table { width: 100%; height: 100%; }
.coursepicture { max-height: 8em; max-width: 8em; margin: 0.5em; margin-right: 1em;}
td { line-height: 1.7em; }

</style>
{% endblock %}


{% block body %}
<div class="courses">
	{% for row in courses|batch(2) %}
		<div class="row row-centered">
			{% for course in row %}

				{% if is_granted('ROLE_ADMIN') %}
				<a href="{{ path('course_manage', {'id': course.id}) }}"><!-- single course box -->
				{% else %}
				<a href="{{ path('course_show', {'id': course.id}) }}"><!-- single course box -->
				{% endif %}
				<div class="col-md-4 col-centered panel panel-default {% if not course.active %}inactive{% endif %}"><div class="panel-body"><!-- panel -->

					<h4>
						{% include 'StagBundle:Course:icon.html.twig' %}
						&nbsp;{{course.name}}
					</h4>

					<table><tr>
						<td>
							{% if course.pictureRef %}
							<img class="img-responsive img-rounded coursepicture" src="{{ path('blob_get', {'id': course.pictureRef.fileName}) }}">
							{% endif %}
						</td>
						<td>
							{{course.level}}<br/>
							<strong>{{course.lecturer}}</strong><br/>
							{{course.place}}<br/>
							<strong>{{course.timespan}}</strong>
									
							{% if is_granted('ROLE_ADMIN') %}
								<div class="pull-right">
									{{ render(controller("StagBundle:Course:active", {'id': course.id})) }}
									{% include 'StagBundle:Course:fblinks.html.twig' %}
								</div>
							{% endif %}
						</td>
					</tr></table>
	
				</div></div><!-- panel -->
				</a><!-- single course box -->
			{% endfor %}
		</div>
	{% endfor %}
	
	<div class="well well-sm text-center legend">
		<span class="glyphicon glyphicon-repeat">&thinsp;Kurz</span> 
		<span class="glyphicon glyphicon-record">&thinsp;Workshop</span> 
		<span class="glyphicon glyphicon-glass">&thinsp;Tančírna</span> 
	</div>
</div>
{% endblock %}

